<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Werewolf Game Setup</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script>
      // Check if QRCode library loaded successfully
      window.addEventListener("load", function () {
        if (typeof QRCode === "undefined") {
          console.error("QRCode library failed to load from primary CDN");
          // Try alternative CDN
          const script = document.createElement("script");
          script.src =
            "https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js";
          script.onload = function () {
            console.log("QRCode library loaded from alternative CDN");
          };
          script.onerror = function () {
            console.error("Failed to load QRCode library from alternative CDN");
            // Try third CDN
            const script2 = document.createElement("script");
            script2.src = "https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js";
            script2.onload = function () {
              console.log("QRCode library loaded from unpkg CDN");
            };
            script2.onerror = function () {
              console.error("All QRCode CDNs failed");
            };
            document.head.appendChild(script2);
          };
          document.head.appendChild(script);
        } else {
          console.log("QRCode library loaded successfully from primary CDN");
        }
      });
    </script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üê∫ Werewolf Game Setup</h1>
        <p>Configure your game and generate player links</p>
      </header>

      <form id="gameSetupForm" class="setup-form">
        <div class="form-group">
          <label for="playerCount">Number of Players:</label>
          <input
            type="number"
            id="playerCount"
            min="6"
            max="20"
            value="8"
            required
          />
        </div>

        <div class="form-group">
          <label for="werewolfCount">Number of Werewolves:</label>
          <input
            type="number"
            id="werewolfCount"
            min="1"
            max="4"
            value="2"
            required
          />
        </div>

        <div class="form-group">
          <label for="seerCount">Number of Seers:</label>
          <input
            type="number"
            id="seerCount"
            min="0"
            max="2"
            value="1"
            required
          />
        </div>

        <div class="form-group">
          <label for="doctorCount">Number of Doctors:</label>
          <input
            type="number"
            id="doctorCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="bodyguardCount">Number of Bodyguards:</label>
          <input
            type="number"
            id="bodyguardCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="cupidCount">Number of Cupids:</label>
          <input
            type="number"
            id="cupidCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="wolfCubCount">Number of Wolf Cubs:</label>
          <input
            type="number"
            id="wolfCubCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="alphaWolfCount">Number of Alpha Wolves:</label>
          <input
            type="number"
            id="alphaWolfCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="sorceressCount">Number of Sorceresses:</label>
          <input
            type="number"
            id="sorceressCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="lycanCount">Number of Lycans:</label>
          <input
            type="number"
            id="lycanCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="witchCount">Number of Witches:</label>
          <input
            type="number"
            id="witchCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>



        <div class="form-group">
          <label for="detectiveCount">Number of Detectives:</label>
          <input
            type="number"
            id="detectiveCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="revealerCount">Number of Revealers:</label>
          <input
            type="number"
            id="revealerCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="piCount">Number of PIs:</label>
          <input
            type="number"
            id="piCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="tannerCount">Number of Tanners:</label>
          <input
            type="number"
            id="tannerCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label for="hunterCount">Number of Hunters:</label>
          <input
            type="number"
            id="hunterCount"
            min="0"
            max="1"
            value="0"
            required
          />
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="usePlayerNames" /> Use Player Names
            (Optional)
          </label>
        </div>

        <div
          id="playerNamesContainer"
          class="player-names-container"
          style="display: none"
        >
          <h3>Player Names</h3>
          <div id="playerNamesList"></div>
        </div>

        <button type="submit" class="btn btn-primary">Generate Game</button>
        <button
          type="button"
          id="testQRBtn"
          class="btn btn-secondary"
          style="margin-left: 1rem"
        >
          Test QR Code
        </button>
        <button
          type="button"
          id="roleGuideBtn"
          class="btn btn-info"
          style="margin-left: 1rem"
        >
          ‚ùì Role Guide
        </button>
      </form>

      <!-- Timer Section -->
      <div class="timer-section">
        <h3>‚è±Ô∏è Game Timer</h3>
        <div class="timer-controls">
          <div class="timer-input">
            <label for="timerMinutes">Minutes:</label>
            <input
              type="number"
              id="timerMinutes"
              min="1"
              max="120"
              value="15"
              style="width: 80px; margin-right: 1rem"
            />
            <label for="timerSeconds">Seconds:</label>
            <input
              type="number"
              id="timerSeconds"
              min="0"
              max="59"
              value="0"
              style="width: 80px"
            />
          </div>
          <div class="timer-buttons">
            <button id="startTimerBtn" class="btn btn-success">Start Timer</button>
            <button id="pauseTimerBtn" class="btn btn-warning" style="display: none">Pause</button>
            <button id="resetTimerBtn" class="btn btn-secondary">Reset</button>
          </div>
        </div>
        <div id="timerDisplay" class="timer-display" style="display: none">
          <span id="timerTime">15:00</span>
        </div>
      </div>

      <!-- Notes Section -->
      <div class="notes-section">
        <h3>üìù Game Notes</h3>
        <textarea
          id="gameNotes"
          placeholder="Write your game notes here... (e.g., player suspicions, night actions, etc.)"
          rows="6"
          style="width: 100%; margin-bottom: 1rem"
        ></textarea>
        <div class="notes-buttons">
          <button id="saveNotesBtn" class="btn btn-primary">Save Notes</button>
          <button id="clearNotesBtn" class="btn btn-secondary">Clear Notes</button>
        </div>
      </div>
      </form>

      <div id="gameResults" class="game-results" style="display: none">
        <h2>Player QR Codes</h2>
        <p class="qr-instructions">
          Scan each QR code with your phone to view your role. Each player
          should scan their own QR code to see their assigned role.
        </p>
        <div id="playerLinks" class="player-links"></div>

        <div class="game-info">
          <h3>Game Summary</h3>
          <div id="gameSummary" class="game-summary"></div>
        </div>

        <div class="role-assignments" style="display: none">
          <h3>Role Assignments</h3>
          <p class="role-assignments-note">
            Each player's assigned role (order does not reflect role assignment
            order):
          </p>
          <div id="roleAssignments" class="role-assignments-list"></div>
        </div>

        <div class="role-assignments-controls">
          <button id="showRoleAssignmentsBtn" class="btn btn-secondary">
            Show Role Assignments
          </button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
