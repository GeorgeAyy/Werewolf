<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Werewolf Moderator Dashboard | 2026 Edition</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Background Effects -->
    <div class="ambient-glow"></div>

    <div class="container glass-panel">
      <header class="app-header">
        <div class="header-icon"><img src="werewolf-2-svgrepo-com.svg" alt="Werewolf Logo" class="header-logo" /></div>
        <h1>Werewolf</h1>
        <h2>Moderator Dashboard</h2>
        <p>Configure your game and summon the pack</p>
      </header>

      <form id="gameSetupForm" class="setup-form glass-panel-inner">
        
        <div class="settings-section">
          <h3><i class="fa-solid fa-users"></i> Basic Configuration</h3>
          <div class="basic-settings-grid">
            <div class="form-group custom-input">
              <label for="playerCount">Total Players</label>
              <div class="input-wrapper">
                <i class="fa-solid fa-user-group input-icon"></i>
                <input type="number" id="playerCount" min="6" max="20" value="8" required />
              </div>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3><i class="fa-solid fa-masks-theater"></i> Roles</h3>
          <p class="section-desc">Assign quantities for each role. Remaining players become Villagers.</p>
          
          <div class="role-inputs-grid">
            <div class="role-input-group theme-wolf">
              <label for="werewolfCount"><i class="fa-solid fa-moon role-icon"></i> Werewolves</label>
              <input type="number" id="werewolfCount" min="0" max="4" value="2" required />
            </div>
            <div class="role-input-group theme-village">
              <label for="seerCount"><i class="fa-solid fa-eye role-icon"></i> Seers</label>
              <input type="number" id="seerCount" min="0" max="2" value="1" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="doctorCount"><i class="fa-solid fa-kit-medical role-icon"></i> Doctors</label>
              <input type="number" id="doctorCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="bodyguardCount"><i class="fa-solid fa-shield role-icon"></i> Bodyguards</label>
              <input type="number" id="bodyguardCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-neutral">
              <label for="cupidCount"><i class="fa-solid fa-heart role-icon"></i> Cupids</label>
              <input type="number" id="cupidCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-wolf">
              <label for="wolfCubCount"><i class="fa-solid fa-paw role-icon"></i> Wolf Cubs</label>
              <input type="number" id="wolfCubCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-wolf">
              <label for="alphaWolfCount"><i class="fa-solid fa-crown role-icon"></i> Alpha Wolves</label>
              <input type="number" id="alphaWolfCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-wolf">
              <label for="sorceressCount"><i class="fa-solid fa-hat-wizard role-icon"></i> Sorceresses</label>
              <input type="number" id="sorceressCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="lycanCount"><i class="fa-solid fa-masks-theater role-icon"></i> Lycans</label>
              <input type="number" id="lycanCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-neutral">
              <label for="witchCount"><i class="fa-solid fa-flask role-icon"></i> Witches</label>
              <input type="number" id="witchCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="detectiveCount"><i class="fa-solid fa-magnifying-glass role-icon"></i> Detectives</label>
              <input type="number" id="detectiveCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="revealerCount"><i class="fa-solid fa-bullseye role-icon"></i> Revealers</label>
              <input type="number" id="revealerCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="piCount"><i class="fa-solid fa-binoculars role-icon"></i> P.I.s</label>
              <input type="number" id="piCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-neutral">
              <label for="tannerCount"><i class="fa-solid fa-face-dizzy role-icon"></i> Tanners</label>
              <input type="number" id="tannerCount" min="0" max="1" value="0" required />
            </div>

            <div class="role-input-group theme-village">
              <label for="hunterCount"><i class="fa-solid fa-crosshairs role-icon"></i> Hunters</label>
              <input type="number" id="hunterCount" min="0" max="1" value="0" required />
            </div>
          </div>

          <div class="villager-counter" id="villagerCounter">
            <i class="fa-solid fa-person"></i>
            <span>Normal Villagers: <strong id="villagerCountDisplay">0</strong></span>
          </div>
        </div>

        <div class="settings-section">
          <div class="checkbox-wrapper">
            <label class="toggle-switch">
              <input type="checkbox" id="usePlayerNames" />
              <span class="slider round"></span>
            </label>
            <span class="toggle-label"><i class="fa-solid fa-id-badge"></i> Use Custom Player Names</span>
          </div>
        </div>

        <div id="playerNamesContainer" class="player-names-container glass-panel-inner" style="display: none">
          <h3><i class="fa-solid fa-signature"></i> Identifiers</h3>
          <div id="playerNamesList"></div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-glow btn-primary"><i class="fa-solid fa-wand-magic-sparkles"></i> Generate Game</button>
          <div class="secondary-actions">
            <!-- <button type="button" id="testQRBtn" class="btn btn-secondary"><i class="fa-solid fa-qrcode"></i> Test QR</button> -->
            <button type="button" id="roleGuideBtn" class="btn btn-outline"><i class="fa-solid fa-book-open"></i> Role Guide</button>
          </div>
        </div>
      </form>

      <!-- Timer Section -->
      <div class="timer-section glass-panel-inner">
        <h3><i class="fa-solid fa-hourglass-half"></i> Phase Timer</h3>
        <div class="timer-controls">
          <div class="timer-input custom-input">
            <div class="input-wrapper">
              <input type="number" id="timerMinutes" min="1" max="120" value="15" />
              <span class="unit">min</span>
            </div>
            <div class="input-wrapper">
              <input type="number" id="timerSeconds" min="0" max="59" value="0" />
              <span class="unit">sec</span>
            </div>
          </div>
          <div class="timer-buttons">
            <button id="startTimerBtn" class="btn btn-success"><i class="fa-solid fa-play"></i> Start</button>
            <button id="pauseTimerBtn" class="btn btn-warning" style="display: none"><i class="fa-solid fa-pause"></i> Pause</button>
            <button id="resetTimerBtn" class="btn btn-secondary"><i class="fa-solid fa-rotate-right"></i> Reset</button>
          </div>
        </div>
        <div id="timerDisplay" class="timer-display" style="display: none">
          <span id="timerTime">15:00</span>
        </div>
      </div>
      
      <!-- Hidden Audio Elements -->
      <audio id="timerBellSound" src="freesound_community-bell-ringing-ii-98323.mp3" preload="auto"></audio>

      <div id="gameResults" class="game-results glass-panel-inner" style="display: none">
        <h2><i class="fa-solid fa-link"></i> Player Links</h2>
        <p class="qr-instructions">
          Distribute these codes to your players. They can scan them with their device camera to securely view their role.
        </p>
        <div id="playerLinks" class="player-links"></div>

        <div class="game-info">
          <h3><i class="fa-solid fa-chart-pie"></i> Distribution Summary</h3>
          <div id="gameSummary" class="game-summary"></div>
        </div>

        <div class="role-assignments" style="display: none">
          <h3><i class="fa-solid fa-clipboard-list"></i> Secret Roles</h3>
          <p class="role-assignments-note">
            (Hidden to protect the game. Only view if you intend to moderate without playing.)
          </p>
          <div id="roleAssignments" class="role-assignments-list"></div>
        </div>

        <div class="role-assignments-controls">
          <button id="showRoleAssignmentsBtn" class="btn btn-outline text-danger">
            <i class="fa-solid fa-eye-slash"></i> Reveal Secret Assignments
          </button>
        </div>
      </div>

      <!-- Game Tracking System -->
      <div id="gameTracking" class="game-tracking glass-panel-inner" style="display: none">
        <h2><i class="fa-solid fa-chess-board"></i> Master Tracking Board</h2>
        
        <div class="tracking-grid">
          <div class="tracking-section box-panel">
            <h3><i class="fa-solid fa-users-viewfinder"></i> Village Status</h3>
            <div id="playerStatusList" class="player-status-list custom-scrollbar">
              <!-- Player status items -->
            </div>
          </div>

          <div class="tracking-section box-panel">
            <h3><i class="fa-solid fa-chart-simple"></i> Casualties</h3>
            <div id="gameStats" class="stats-grid">
              <div class="stat-box alive">
                <i class="fa-solid fa-heart-pulse"></i>
                <div class="stat-value" id="aliveCount">0</div>
                <div class="stat-label">Alive</div>
              </div>
              <div class="stat-box dead">
                <i class="fa-solid fa-skull"></i>
                <div class="stat-value" id="deadCount">0</div>
                <div class="stat-label">Deceased</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Night Dialogue Script -->
        <div class="night-dialogue box-panel" style="margin-bottom: 1.5rem;">
          <h3><i class="fa-solid fa-book-journal-whills"></i> Night Dialogue Script</h3>
          <p class="dialogue-help" style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
            Read these scripts in order during the Night Phase. Only roles present in this game are shown.
          </p>
          <div id="nightDialogueList" class="dialogue-list custom-scrollbar" style="max-height: 250px; overflow-y: auto; background: rgba(2, 6, 23, 0.3); border: 1px solid var(--glass-border); border-radius: var(--radius-sm); padding: 1rem;">
            <!-- Dialogue items generated dynamically -->
          </div>
        </div>

        <!-- Night Actions Tracking -->
        <div class="night-actions box-panel">
          <h3><i class="fa-solid fa-cloud-moon"></i> Night Log</h3>
          <div class="action-form">
            <div class="custom-select-wrapper">
              <select id="actionPerformer" class="custom-select">
                <option value="">-- Who acts? --</option>
              </select>
            </div>
            <div class="action-auto-label" id="actionAutoLabel">
              <span class="action-auto-icon">‚ùì</span>
              <span class="action-auto-text">Select a player</span>
            </div>
            <div class="custom-select-wrapper">
              <select id="actionTarget" class="custom-select">
                <option value="">-- On who? --</option>
              </select>
            </div>
            <input type="hidden" id="actionType" value="">
            <button type="button" id="addActionBtn" class="btn btn-primary btn-sm"><i class="fa-solid fa-plus"></i></button>
          </div>
          <div id="actionsList" class="actions-list custom-scrollbar">
            <!-- Actions -->
          </div>
        </div>



        <!-- Day Vote Tally -->
        <div id="votingSection" class="voting-section box-panel">
          <h3><i class="fa-solid fa-hand-paper"></i> Day Vote Tally</h3>
          <div id="voteTallyList" class="vote-tally-list custom-scrollbar">
            <!-- Dynamically populated with alive players and their vote counts -->
          </div>
          <div class="vote-controls" style="margin-top: 1rem; display: flex; justify-content: space-between; align-items: center;">
            <div id="remainingVotesDisplay" style="font-size: 0.9rem; color: var(--text-muted); font-weight: 500;">
              Votes Remaining: <span id="remainingVotesCount" style="color: var(--primary); font-weight: 700;">0</span>
            </div>
            <button id="resetVotesBtn" class="btn btn-outline btn-sm"><i class="fa-solid fa-rotate-right"></i> Reset Votes</button>
          </div>
        </div>



        <!-- Session Controls -->
        <div class="session-controls box-panel" style="margin-top: 1.5rem;">
          <h3><i class="fa-solid fa-power-off"></i> Session Controls</h3>
          <div style="display: flex; gap: 1rem; margin-top: 1rem;">
            <button id="restartGameBtn" class="btn btn-primary" style="flex: 1;"><i class="fa-solid fa-rotate"></i> Restart with Same Players</button>
            <button id="endGameBtn" class="btn btn-outline" style="flex: 1; border-color: var(--danger); color: var(--danger);"><i class="fa-solid fa-skull"></i> End Game</button>
          </div>
        </div>
      </div>
    </div>

    <!-- QRious CDN for actual QR generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
